"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){a.module("cui-ng",[]),a.module("cui-ng").provider("$cuiI18n",[function(){var a,b;this.setLocalePreference=function(b){a=b},this.setLocaleCodesAndNames=function(a){b=a},this.getLocaleCodesAndNames=function(){return b},this.getInternationalizedName=function(b,c){var d;if(d=_.find(c,function(a){return a.lang===b}),void 0!=d)return d.text||d.value;if(!a)return void console.log("You need to configure you prefered language array with cuiI18n.setLocalePreference");for(var e=0;e<=a.length;e++)if(d=_.find(c,function(b){return b.lang===a[e]}),void 0!=d)return d.text||d.value},this.$get=function(){return this}}]),a.module("cui-ng").factory("PubSub",["$timeout",function(a){function b(a){return function(){return this[a].apply(this,arguments)}}var c={topics:{},subUid:-1};return c.subscribe=function(a,b,c){var d=this.subUid+=1,e={};return this.topics[a]||(this.topics[a]=[]),e.token=d,e.callback=b,e.once=!!c,this.topics[a].push(e),d},c.subscribeOnce=function(a,b){return this.subscribe(a,b,!0)},c.publish=function(b,c){var d,e,f=this;return this.topics[b]?(a(function(){for(d=f.topics[b],e=d?d.length:0;e;)e-=1,d[e].callback(b,c),d[e].once===!0&&f.unsubscribe(d[e].token)},0),!0):!1},c.unsubscribe=function(a){var b,c,d=!1;for(b in this.topics)if(this.topics.hasOwnProperty(b)&&this.topics[b]){for(c=this.topics[b].length;c;){if(c-=1,this.topics[b][c].token===a)return this.topics[b].splice(c,1),a;b===a&&(this.topics[b].splice(c,1),d=!0)}if(d===!0)return a}return!1},c.on=b("subscribe"),c.once=b("subscribeOnce"),c.trigger=b("publish"),c.off=b("unsubscribe"),c}]),a.module("cui-ng").filter("cuiI18n",["LocaleService","$cuiI18n",function(a,b){return function(c){return b.getInternationalizedName(a.getLocaleCode(),c)}}]),a.module("cui-ng").directive("autoComplete",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(a,b,c,d,e,f,g){function h(b,f,g,h){function w(a,c){a&&("object"===("undefined"==typeof a?"undefined":_typeof(a))?(b.searchStr=C(a),z({originalObject:a})):"string"==typeof a&&a.length>0?b.searchStr=a:console&&console.error&&console.error("Tried to set "+(c?"initial":"")+" value of angucomplete to",a,"which is an invalid value"),F(!0))}function x(a){ma=null,b.hideResults(a),document.body.removeEventListener("click",x)}function y(a){return a.which?a.which:a.keyCode}function z(a){"function"==typeof b.selectedObject?b.selectedObject(a):b.selectedObject=a,F(a?!0:!1)}function A(a){return function(c){return b[a]?b[a](c):c}}function B(a){z({originalObject:a}),b.clearSelected&&(b.searchStr=null),U()}function C(a){return b.titleField.split(",").map(function(b){return D(a,b)}).join(" ")}function D(a,b){var c,d;if(b){c=b.split("."),d=a;for(var e=0;e<c.length;e++)d=d[c[e]]}else d=a;return d}function E(a,c){var e,f,g;return g=new RegExp(c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),a?(a.match&&a.replace||(a=a.toString()),f=a.match(g),e=f?a.replace(g,'<span class="'+b.matchClass+'">'+f[0]+"</span>"):a,d.trustAsHtml(e)):void 0}function F(a){b.notEmpty=a,ia=b.searchStr}function G(a){var c=y(a);if(c!==l&&c!==j)if(c===k||c===n)a.preventDefault();else if(c===i)a.preventDefault(),!b.showDropdown&&b.searchStr&&b.searchStr.length>=fa&&(V(),b.searching=!0,Y(b.searchStr));else if(c===m)U(),b.$apply(function(){ea.val(b.searchStr)});else{if(0===fa&&!b.searchStr)return;b.searchStr&&""!==b.searchStr?b.searchStr.length>=fa&&(V(),ga&&e.cancel(ga),b.searching=!0,ga=e(function(){Y(b.searchStr)},b.pause)):b.showDropdown=!1,ia&&ia!==b.searchStr&&!b.clearSelected&&b.$apply(function(){z()})}}function H(a){!b.overrideSuggestions||b.selectedObject&&b.selectedObject.originalObject===b.searchStr||(a&&a.preventDefault(),e.cancel(ga),R(),B(b.searchStr))}function I(a){var b=getComputedStyle(a);return a.offsetHeight+parseInt(b.marginTop,10)+parseInt(b.marginBottom,10)}function J(){return ka.getBoundingClientRect().top+parseInt(getComputedStyle(ka).maxHeight,10)}function K(){return f[0].querySelectorAll(".angucomplete-row")[b.currentIndex]}function L(){return K().getBoundingClientRect().top-(ka.getBoundingClientRect().top+parseInt(getComputedStyle(ka).paddingTop,10))}function M(a){ka.scrollTop=ka.scrollTop+a}function N(){var a=b.results[b.currentIndex];b.matchClass?ea.val(C(a.originalObject)):ea.val(a.title)}function O(a){var c=y(a),d=null,e=null;c===n&&b.results?(b.currentIndex>=0&&b.currentIndex<b.results.length?(a.preventDefault(),b.selectResult(b.results[b.currentIndex])):(H(a),U()),b.$apply()):c===i&&b.results?(a.preventDefault(),b.currentIndex+1<b.results.length&&b.showDropdown&&(b.$apply(function(){b.currentIndex++,N()}),la&&(d=K(),J()<d.getBoundingClientRect().bottom&&M(I(d))))):c===k&&b.results?(a.preventDefault(),b.currentIndex>=1?(b.$apply(function(){b.currentIndex--,N()}),la&&(e=L(),0>e&&M(e-1))):0===b.currentIndex&&b.$apply(function(){b.currentIndex=-1,ea.val(b.searchStr)})):c===o?b.results&&b.results.length>0&&b.showDropdown?-1===b.currentIndex&&b.overrideSuggestions?H():(-1===b.currentIndex&&(b.currentIndex=0),b.selectResult(b.results[b.currentIndex]),b.$digest()):b.searchStr&&b.searchStr.length>0&&H():c===m&&a.preventDefault()}function P(a){return function(c,d,e,f){d||e||f||!c.data||(c=c.data),b.searching=!1,Z(D(aa(c),b.remoteUrlDataField),a)}}function Q(a,c,d,e){0!==c&&-1!==c&&(c||d||e||(c=a.status),b.remoteUrlErrorCallback?b.remoteUrlErrorCallback(a,c,d,e):console&&console.error&&console.error("http error"))}function R(){ja&&ja.resolve()}function S(d){var e={},f=b.remoteUrl+encodeURIComponent(d);b.remoteUrlRequestFormatter&&(e={params:b.remoteUrlRequestFormatter(d)},f=b.remoteUrl),b.remoteUrlRequestWithCredentials&&(e.withCredentials=!0),R(),ja=a.defer(),e.timeout=ja.promise,c.get(f,e).success(P(d)).error(Q)}function T(c){R(),ja=a.defer(),b.remoteApiHandler(c,ja.promise).then(P(c))["catch"](Q)}function U(){b.showDropdown=!1,b.results=[],ka&&(ka.scrollTop=0)}function V(){b.showDropdown=ca,b.currentIndex=b.focusFirst?0:-1,b.results=[]}function W(a){var c,d,e,f,g=b.searchFields.split(","),h=[];for("undefined"!=typeof b.parseInput()&&(a=b.parseInput()(a)),c=0;c<b.localData.length;c++){for(d=!1,e=0;e<g.length;e++)f=D(b.localData[c],g[e])||"",d=d||f.toString().toLowerCase().indexOf(a.toString().toLowerCase())>=0;d&&(h[h.length]=b.localData[c])}b.searching=!1,Z(h,a)}function X(a,c,d){if(!d)return!1;for(var e in c)if(c[e].toLowerCase()===d.toLowerCase())return b.selectResult(a),!0;return!1}function Y(a){!a||a.length<fa||(b.localData?b.$apply(function(){W(a)}):b.remoteApiHandler?T(a):S(a))}function Z(a,c){var d,e,f,g,h,i;if(a&&a.length>0)for(b.results=[],d=0;d<a.length;d++)b.titleField&&""!==b.titleField&&(g=h=C(a[d])),e="",b.descriptionField&&(e=i=D(a[d],b.descriptionField)),f="",b.imageField&&(f=D(a[d],b.imageField)),b.matchClass&&(h=E(g,c),i=E(e,c)),b.results[b.results.length]={title:h,description:i,image:f,originalObject:a[d]};else b.results=[];b.autoMatch&&1===b.results.length&&X(b.results[0],{title:g,desc:e||""},b.searchStr)?b.showDropdown=!1:0!==b.results.length||da?b.showDropdown=!0:b.showDropdown=!1}function $(){b.localData?Z(b.localData,""):b.remoteApiHandler?T(""):S("")}var _,aa,ba,ca,da,ea=f.find("input"),fa=p,ga=null,ha=t,ia=null,ja=null,ka=f[0].querySelector(".angucomplete-dropdown"),la=!1,ma=null;f.on("mousedown",function(a){a.target.id?(ma=a.target.id,ma===b.id+"_dropdown"&&document.body.addEventListener("click",x)):ma=a.target.className}),b.currentIndex=b.focusFirst?0:null,b.searching=!1,ba=b.$watch("initialValue",function(a){a&&(ba(),w(a,!0))}),void 0!==g.fieldRequired&&b.$watch("fieldRequired",function(a,c){a&&a!=={}?a&&a!=={}&&h[b.inputName].$setValidity("required",!0):h[b.inputName].$setValidity("required",!1)}),b.$on("angucomplete-alt:changeInput",function(a,c,d){c&&c===b.id&&w(d)}),b.onFocusHandler=function(){b.focusIn&&b.focusIn(),0!==fa||b.searchStr&&0!==b.searchStr.length||(b.currentIndex=b.focusFirst?0:b.currentIndex,b.showDropdown=!0,$())},b.hideResults=function(){ma&&(ma===b.id+"_dropdown"||ma.indexOf("angucomplete")>=0)?ma=null:(_=e(function(){U(),b.$apply(function(){b.searchStr&&b.searchStr.length>0&&ea.val(b.searchStr)})},s),R(),b.focusOut&&b.focusOut(),b.overrideSuggestions&&b.searchStr&&b.searchStr.length>0&&-1===b.currentIndex&&H())},b.resetHideResults=function(){_&&e.cancel(_)},b.hoverRow=function(a){b.currentIndex=a},b.selectResult=function(a){b.matchClass&&(a.title=C(a.originalObject),a.description=D(a.originalObject,b.descriptionField)),b.clearSelected?b.searchStr=null:b.searchStr=a.title,z(a),U()},b.inputChangeHandler=function(a){return a.length<fa?(R(),U()):0===a.length&&0===fa&&(b.searching=!1,$()),b.inputChanged&&(a=b.inputChanged(a)),a},b.fieldRequiredClass&&""!==b.fieldRequiredClass&&(ha=b.fieldRequiredClass),b.minlength&&""!==b.minlength&&(fa=parseInt(b.minlength,10)),b.pause||(b.pause=r),b.clearSelected||(b.clearSelected=!1),b.overrideSuggestions||(b.overrideSuggestions=!1),b.fieldRequired&&h&&F(b.initialValue?!0:!1),b.inputType=g.type?g.type:"text",b.textSearching=g.textSearching?g.textSearching:u,b.textNoResults=g.textNoResults?g.textNoResults:v,ca="false"===b.textSearching?!1:!0,da="false"===b.textNoResults?!1:!0,b.maxlength=g.maxlength?g.maxlength:q,ea.on("keydown",O),ea.on("keyup",G),aa=A("remoteUrlResponseFormatter"),e(function(){var a=getComputedStyle(ka);la=a.maxHeight&&"auto"===a.overflowY})}var i=40,j=39,k=38,l=37,m=27,n=13,o=9,p=3,q=524288,r=500,s=200,t="autocomplete-required",u="Searching...",v="No results found",w="/angucomplete-alt/index.html";return f.put(w,'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'ng-valid\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@",parseInput:"&"},templateUrl:function(a,b){return b.templateUrl||w},compile:function(a){var b=g.startSymbol(),c=g.endSymbol();if("{{"!==b||"}}"!==c){var d=a.html().replace(/\{\{/g,b).replace(/\}\}/g,c);a.html(d)}return h}}}]),a.module("cui-ng").directive("classToggle",function(){return{restrict:"EAC",scope:!0,link:function(a,b,c){var d=c.toggledClass||"class-toggle-"+a.$id,e=function(){return b.attr("class")||""},f=function(b){a.toggled=b.indexOf(d)>=0};a.toggleClass=function(){b.toggleClass(d)},a.toggleOn=function(){a.toggled||a.toggleClass()},a.toggleOff=function(){a.toggled&&a.toggleClass()},a.$watch(e,f)}}}),a.module("cui-ng").directive("cuiAvatar",["$http","$filter",function(b,c){return{restrict:"A",scope:{cuiAvatar:"=",cuiAvatarNames:"=",cuiAvatarEmail:"="},compile:function(){return{pre:function(d,e,f){var g={selectors:{$elem:a.element(e[0])},config:{colorClassPrefix:f.cuiAvatarColorClassPrefix||!1,colorCount:f.cuiAvatarColorCount||0,cuiI18nFilter:a.isDefined(f.cuiAvatarCuii18nFilter)||!1,maxNumberOfInitials:f.cuiAvatarMaxNumInitials||2},watchers:function(){d.$watch("cuiAvatar",function(a){a&&g.update()}),d.$watch("cuiAvatarNames",function(a){a&&g.update()}),d.$watch("cuiAvatarEmail",function(a){a&&g.update()})},helpers:{isColorClassApplied:function(){return _.find(g.selectors.$elem[0].classList,function(a){return a.indexOf(g.config.colorClassPrefix)>-1})},applyRandomColorClass:function(){var a=Math.floor(Math.random()*g.config.colorCount+1);g.selectors.$elem[0].classList.add(g.config.colorClassPrefix+a),g.config.colorClassAdded=g.config.colorClassPrefix+a},getInitialsToDisplay:function(){var a=void 0,b="";return g.config.cuiI18nFilter&&(a=c("cuiI18n")(d.cuiAvatarNames).split(" ")),(a||d.cuiAvatarNames).forEach(function(a,c){if(c<g.config.maxNumberOfInitials){if(!a)return;b+=a[0].toUpperCase()}}),b}},render:{nameBackground:function(){if(g.config.colorClassPrefix){if(0===g.config.colorCount)throw"For cui-avatar if you specify color class prefix you must specify the a cui-avatar-color-count";if(g.helpers.isColorClassApplied())return;g.helpers.applyRandomColorClass()}},initials:function(){d.cuiAvatarNames&&(g.selectors.$elem[0].innerHTML='<div class="cui-avatar__initials"></div>',g.selectors.$initials=a.element(g.selectors.$elem[0].childNodes[0]),g.selectors.$initials[0].innerHTML=g.helpers.getInitialsToDisplay())},image:function(){var c=function(b){g.config.colorClassAdded&&g.selectors.$elem[0].classList.remove(g.config.colorClassAdded),g.selectors.$elem[0].innerHTML='<div class="cui-avatar__image-container"></div>',g.selectors.$image=a.element(g.selectors.$elem[0].childNodes[0]),g.selectors.$image[0].style.backgroundImage='url("'+b+'")'},e=new Image;if(d.cuiAvatar&&""!==d.cuiAvatar)e.src=d.cuiAvatar,e.onload=c(e.src);else{if(!d.cuiAvatarEmail)return;!function(){var a=md5(d.cuiAvatarEmail);b.get("https://www.gravatar.com/avatar/"+a+"?d=404").then(function(b){e.src="https://www.gravatar.com/avatar/"+a,e.onload=c(e.src)})}()}}},update:function(){g.render.nameBackground(),g.render.initials(),g.render.image()}};g.render.nameBackground(),g.render.initials(),g.render.image(),g.watchers()}}}}}]),a.module("cui-ng").directive("cuiButton",function(){return{restrict:"E",transclude:!0,scope:{errorIf:"=",loadingIf:"=",successIf:"=",disableIf:"=",errorMessage:"@",loadingMessage:"@",successMessage:"@",buttonClick:"&"},link:function(a,b,c){c.hasOwnProperty("errorMessage")?a.errorMessage=c.errorMessage:a.errorMessage="Error",c.hasOwnProperty("loadingMessage")?a.loadingMessage=c.loadingMessage:a.loadingMessage="Loading",c.hasOwnProperty("successMessage")?a.successMessage=c.successMessage:a.successMessage="Success"},template:'\n        <button class="cui-button cui-button--error-alt" ng-if="errorIf" ng-click="buttonClick()" ng-disabled="disableIf">\n          {{errorMessage}}\n        </button>\n        <button class="cui-button cui-button--loading-alt" ng-if="loadingIf" ng-disabled="disableIf">\n          <span>{{loadingMessage}}</span>\n          <div class="cui-button__ellipses"></div>\n          <div class="cui-button__ellipses"></div>\n          <div class="cui-button__ellipses"></div>\n        </button>\n        <button class="cui-button cui-button--success" ng-if="successIf" ng-disabled="disableIf">\n          {{successMessage}}\n          <svg class="cui-button__check" width="21px" height="16px" viewBox="0 0 21 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title>check</title>\n              <g id="check" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <path d="M0.824056194,14.5726523 C1.60584855,15.3483885 2.86333934,15.3420834 3.63455864,14.5567179 L11.8587648,6.18165837 C12.62917,5.39712184 13.9014742,5.37922301 14.6979727,6.13923477 L17.3615817,8.68082663 C18.1592277,9.44193325 19.4283055,9.41819274 20.1974828,8.62642494 L19.932337,8.89935798 C20.700916,8.10820614 20.673432,6.84262122 19.8821394,6.08333201 L14.6486407,1.06149931 C13.8523384,0.297402956 12.5724404,0.323089801 11.8099641,1.09847731 L1.07504371,12.0151757 C0.303588289,12.7996944 0.31135936,14.063927 1.09376039,14.8402672 L0.824056194,14.5726523 Z" fill="currentColor" transform="translate(10.500000, 7.826229) rotate(-180.000000) translate(-10.500000, -7.826229) "></path>\n              </g>\n          </svg>\n        </button>\n        <ng-transclude ng-if="!loadingIf && !errorIf && !successIf" ng-click="buttonClick()" ng-disabled="disableIf">\n        </ng-translude>\n    '}}),a.module("cui-ng").directive("cuiDropdown",["$compile",function(b){return{require:"ngModel",restrict:"E",scope:{ngModel:"=",options:"&",constraints:"&"},link:function(c,d,e,f){var g=c.$id,h=void 0,i=void 0,j=void 0,k={initScope:function(){(e.ngRequired||e.required)&&(f.$validators.required=function(){return null!==f.$viewValue}),a.forEach(k.watchers,function(a){a()}),a.forEach(k.scope,function(a,b){c[b]=a})},config:{inputClass:e["class"]||"cui-dropdown",dropdownWrapperClass:e.dropdownClass||"cui-dropdown__wrapper",dropdownItemClass:e.dropdownItemClass||"cui-dropdown__item",attachment:e.attachment||"top left",targetAttachment:e.targetAttachment||"top left",offset:e.offset||"0 0",defaultConstraints:[{to:"window",attachment:"together none"}],returnValue:e.returnValue,displayValue:e.displayValue,required:e.ngRequired||e.required||!1,defaultOption:a.isDefined(e.defaultOption),defaultOptionValue:e.defaultOption||'("select-one" | translate)'},selectors:{$cuiDropdown:a.element(d),$body:a.element(document.body)},watchers:{dropdownClick:function(){c.$on(g.toString(),k.helpers.reassignModel)},languageChange:function(){c.$on("languageChange",k.helpers.handleLanguageChange)},model:function(){c.$watch("ngModel",function(a,b){if(void 0!==b){var c=_.findIndex(k.helpers.getOptionReturnValues(),function(b){return b===a});-1===c&&(c=0),k.helpers.reassignModel(null,c)}})},options:function(){c.$watch(c.options,function(a,b){a&&(k.helpers.setInitialInputValue(),k.render.currentValueBox())},function(b,c){return!a.equals(b,c)})}},scope:{toggleDropdown:function(){k.selectors.$dropdown?k.scope.destroyDropdown():k.render.dropdown()},destroyDropdown:function(){k.selectors.$dropdown&&(i.$destroy(),k.selectors.$dropdown.detach(),k.selectors.$dropdown=null)}},helpers:{getOptionDisplayValues:function(){var b=[],d=k.config,e=d.defaultOption,f=d.defaultOptionValue,g=d.displayValue;return e&&b.push(c.$eval(f)),a.forEach(c.options(),function(a,d){if(g){var e={object:a,value:a,key:d};b.push(c.$eval(g,e))}else b.push(a)}),b},getOptionReturnValues:function(){var b=[],d=k.config,e=d.defaultOption,f=d.returnValue;return e&&b.push(null),a.forEach(c.options(),function(a,d){if(f){var e={object:a,value:a,key:d};b.push(c.$eval(f,e))}else b.push(a)}),b},getDropdownItem:function(a,d){var e="$root.$broadcast('"+g+"', "+a+")";return b('<div class="'+k.config.dropdownItemClass+'" ng-click="'+e+'">\n                                '+d+"\n                            </div>")(c)},setInitialInputValue:function(){var b=k.helpers.getOptionDisplayValues(),d=k.helpers.getOptionReturnValues();if(!c.ngModel)return c.displayValue=b[0],c.ngModel=d[0],void(j=0);var e=_.findIndex(d,function(b){return a.equals(b,c.ngModel)});e>-1?(c.displayValue=b[e],j=e):(c.displayValue=b[0],c.ngModel=d[0],j=0)},reassignModel:function(a,b){"number"==typeof b?j=b:b=j;var d=k.helpers.getOptionDisplayValues(),e=k.helpers.getOptionReturnValues();c.displayValue=d[b],c.ngModel=e[b],k.scope.destroyDropdown()},handleLanguageChange:function(){k.helpers.reassignModel()}},render:{currentValueBox:function(){h&&h.$destroy(),h=c.$new();var a=b('<div class="'+k.config.inputClass+'" ng-click="toggleDropdown()" off-click="destroyDropdown()" id="cui-dropdown-'+g+'">\n                                {{displayValue}}\n                            </div>')(h);k.selectors.$cuiDropdown.replaceWith(a),k.selectors.$cuiDropdown=a},dropdown:function l(){i&&i.$destroy(),i=c.$new();var l=b('<div class="'+k.config.dropdownWrapperClass+'" off-click-filter="\'#cui-dropdown-'+g+"'\"></div>")(i),a=k.helpers.getOptionDisplayValues();a.forEach(function(a,b){l.append(k.helpers.getDropdownItem(b,a))}),l.width(.9*k.selectors.$cuiDropdown.outerWidth()),k.selectors.$dropdown=l,k.selectors.$body.append(l),new Tether({element:k.selectors.$dropdown[0],target:k.selectors.$cuiDropdown[0],attachment:k.config.attachment,targetAttachment:k.config.targetAttachment,constraints:c.constraints()||k.config.defaultConstraints})}}};k.initScope()}}}]),a.module("cui-ng").directive("cuiExpandable",["$compile",function(b){return{restrict:"E",transclude:!0,link:function(b,c,d,e,f){var g=b.$new();b.$on("$destroy",function(){return g.$destroy()}),f(g,function(a,b){c.append(a)});var h=a.element(c[0].querySelector("cui-expandable-body"));h.hide();var i=function(){c.toggleClass("expanded")},j=function(){h.animate({height:"toggle"},parseInt(c.attr("transition-speed")||300),"linear")};g.toggleExpand=function(a){a&&"INPUT"===a.target.tagName&&a.target.labels&&a.target.labels.length>0||i()},g.expand=function(){g.expanded||i()},g.collapse=function(){g.expanded&&i()},g.$watch(function(){return c.attr("class")||""},function(a,b){b===a&&a.indexOf("expanded")>-1?(g.expanded=!0,j()):-1===a.indexOf("expanded")?(g.expanded===!0&&j(),g.expanded=!1):(g.expanded===!1&&j(),g.expanded=!0)})}}}]),a.module("cui-ng").provider("$cuiIcon",function(){var a={};this.iconSet=function(b,c,d){a[b]={path:c,viewBox:d}},this.getIconSets=function(){return a},this.getIconSet=function(b){if(!a[b])throw new Error("The icon collection with the namespace "+b+" is not yet defined in the $cuiIcon provider.");return a[b]},this.$get=function(){return this}}),a.module("cui-ng").directive("cuiIcon",["$cuiIcon",function(b){return{restrict:"E",scope:{},link:function(c,d,e){var f=e.cuiSvgIcon,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0;if(h=e.preserveaspectratio?'preserveAspectRatio="'+e.preserveaspectratio+'"':"",i=e.svgClass?'class="'+e.svgClass+'"':"",g=e.viewbox?'viewBox="'+e.viewbox+'"':"",j=e.useClass?'class="'+e.useClass+'"':"",f&&f.indexOf(".svg")>-1)k=f;else{if(!f)throw new Error("You need to define a cui-svg-icon attribute for cui-icon");var l=f.split(":"),m=_slicedToArray(l,2),n=m[0],o=m[1];k=b.getIconSet(n).path+"#"+o,""===g&&b.getIconSet(n).viewBox&&(g='viewBox="'+b.getIconSet(n).viewBox+'"')}var p=$('<svg xmlns="http://www.w3.org/2000/svg" '+h+" "+i+" "+g+'>\n                    <use xlink:href="'+k+'" '+j+"></use>\n                </svg>");a.element(d).replaceWith(p)}}}]),a.module("cui-ng").factory("CuiPopoverHelpers",function(){var a={getResetStyles:function(){return{"margin-right":"","margin-left":"","margin-bottom":"","margin-top":"",left:"",top:"",bottom:"",right:""}},getAttachmentFromPosition:function(a){switch(a){case"top":return"bottom center";case"bottom":return"top center";case"right":return"middle left";case"left":return"middle right"}},invertAttachmentPartial:function(a){switch(a){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left"}},parsePositionArray:function(b){var c=[{position:"bottom"},{position:"top"},{position:"right"},{position:"left"}],d=[];return"undefined"==typeof b?d.push.apply(d,c):b.forEach(function(e,f){switch(e){case"any":d.push.apply(d,c);break;case"invert":d.push(Object.assign({},b[f-1],{position:a.invertAttachmentPartial(b[f-1].position)}));break;default:d.push(e)}}),d},parseOffset:function(b){var c=b.split(" "),d=a.getOffsetAndUnitsOfOffset(c[0]),e=a.getOffsetAndUnitsOfOffset(c[1]);return{verticalOffset:d,horizontalOffset:e}},parseAttachment:function(a){var b=a.split(" "),c=_slicedToArray(b,2),d=c[0],e=c[1];return{verticalAttachment:d,horizontalAttachment:e}},getTetherOffset:function(b,c){var d=a.parseOffset(c),e=d.verticalOffset,f=d.horizontalOffset;switch(b){case"top":case"bottom":return"0 "+-1*f.amount+f.units;default:return-1*e.amount+e.units+" 0"}},invertAttachment:function(b){var c=a.parseAttachment(b),d=c.verticalAttachment,e=c.horizontalAttachment;return invertAttachmentPartial(d)+" "+invertAttachmentPartial(e)},getOffsetAndUnitsOfOffset:function(a){var b=void 0,c=void 0;switch(a.indexOf("%")){case-1:b=window.parseInt(a.split("px")[0]),c="px";break;default:b=window.parseInt(a.split("%")[0]),c="%"}return{amount:b,units:c}},getPointerOffset:function(b){var c=b.position,d=b.offsetBetweenPointerAndContent,e=(b.popoverHeight,b.popoverWidth,b.pointerHeight),f=(b.pointerWidth,b.containerHeight),g=(b.containerWidth,b.distanceBetweenTargetAndPopover,a.getOffsetAndUnitsOfOffset(d)),h=function(){switch(c){case"top":case"bottom":return{"margin-left":"50%",left:-1*g.amount+g.units};case"left":case"right":switch(g.amount){case 0:return{top:"50%"};default:var a=void 0;return a="%"===g.units?f*(-1*g.amount/100):g.amount+g.units,{top:"50%","margin-top":a}}}},i=a.getContainerPaddings(b),j=function(){switch(c){case"top":return{bottom:"1px",transform:"translate(-50%,"+(-Math.ceil(parseFloat(i["padding-bottom"]))+e)+"px)"};case"bottom":return{top:"1px",transform:"translate(-50%,"+(Math.ceil(parseFloat(i["padding-top"]))-e)+"px)"};case"left":return{right:parseFloat(i["padding-right"])-e+"px",transform:"translate(-1px,-50%)"};case"right":return{left:parseFloat(i["padding-left"])-e+"px",transform:"translate(1px,-50%)"}}};return Object.assign({},a.getResetStyles(),j(),h())},getPointerBorderStyles:function(a){var b=a.position,c=a.pointerHeight,d=a.pointerWidth,e=d+"px solid transparent",f=c+"px solid transparent";return"top"===b||"bottom"===b?{"border-right":e,"border-left":e,"border-bottom":f,"border-top":f}:{"border-right":f,"border-left":f,"border-bottom":e,"border-top":e}},getPointerStyles:function(b){var c=b.element,d=b.position,e=(b.offsetBetweenPointerAndContent,b.popoverHeight,b.popoverWidth,b.pointerHeight),f=(b.pointerWidth,b.containerHeight,b.containerWidth,b.distanceBetweenTargetAndPopover,c.css("backgroundColor")),g=e+"px solid "+f;return Object.assign({position:"absolute"},a.getPointerOffset(b),a.getPointerBorderStyles(b),_defineProperty({},"border-"+d,g))},getPointer:function(b){var c=$('<span class="cui-popover__pointer"></span>');return c.css(a.getPointerStyles(b)),c},getPopoverMargins:function(a,b){var c=b+"px";return{"margin-top":"bottom"===a?c:"","margin-right":"left"===a?c:"","margin-bottom":"top"===a?c:"","margin-left":"right"===a?c:""}},getContainerPaddings:function(b){var c=b.position,d=(b.offsetBetweenPointerAndContent,b.popoverHeight),e=b.popoverWidth,f=b.pointerHeight,g=b.distanceBetweenTargetAndPopover,h=a.getOffsetAndUnitsOfOffset(g),i="",j="",k="",l="";if("top"===c||"bottom"===c){var m=void 0;switch(h.units){default:m=h.amount+h.units;break;case"%":var n=d+f;m=n*(h.amount/100)+"px"}"top"===c?j=m:i=m}else{var o=void 0;switch(h.units){default:o=h.amount+h.units;break;case"%":var p=e+f;o=p*(h.amount/100)+"px"}"left"===c?k=o:l=o}return{"padding-top":i||"","padding-right":k||"","padding-bottom":j||"","padding-left":l||""}}};return a}),a.module("cui-ng").directive("cuiPopover",["CuiPopoverHelpers","$compile","$timeout","$interval",function(b,c,d,e){return{restrict:"EA",compile:function(){return{pre:function(c,f,g){var h=void 0,i=[],j=void 0,k=void 0,l=void 0,m=void 0,n={},o=void 0,p=void 0,q=void 0,r={init:function(){if(f.css({opacity:"0","pointer-events":"none",position:"fixed",right:"0"}),h=this,p=0,!g.popoverPositions)throw new Error("You must define popover-positions for the cui-popover directive.");o=c.$eval(g.popoverPositions),o=b.parsePositionArray(o),h.config(o[p]),h.selectors[p]={},d(function(){return h.render.popoverContainer(p)}),a.forEach(h.watchers,function(a){a()})},config:function(a){var c=n;c.element=f,c.target=g.target,c.targetModifier=g.targetModifier||void 0,c.pointerHeight=g.pointerHeight&&window.parseInt(g.pointerHeight)||14,c.pointerWidth=g.pointerWidth&&window.parseInt(g.pointerWidth)||9,c.popoverWidth=f.outerWidth(),c.popoverHeight=f.outerHeight(),c.position=a.position;var d=(a&&a.popoverOffset||g.popoverOffset||"0 0").split(" "),e=a&&a.contentOffset||g.contentOffset||"0",h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0;if("top"===c.position||"bottom"===c.position){var o=_slicedToArray(d,2);j=o[0],k=o[1],h=["0",e].join(" "),i=["0",k].join(" "),l=c.popoverWidth,m=c.popoverHeight+c.pointerHeight}else{var p=_slicedToArray(d,2);k=p[0],j=p[1],h=[e,"0"].join(" "),i=[k,"0"].join(" "),l=c.popoverWidth+c.pointerHeight,m=c.popoverHeight}c.distanceBetweenTargetAndPopover=j,c.offsetBetweenPointerAndContent=e,c.offset=h,c.targetOffset=i,c.containerHeight=m,c.containerWidth=l,c.attachment=b.getAttachmentFromPosition(c.position),c.targetAttachment=b.getAttachmentFromPosition(b.invertAttachmentPartial(c.position))},helpers:{getTetherOptions:function(){var a=arguments.length<=0||void 0===arguments[0]?h.selectors.$container[0]:arguments[0],c=arguments[1],d=c.target,e=c.position,f=c.offset,g=c.targetOffset,i=c.targetModifier,j=c.attachment,k=c.targetAttachment;return{target:d,targetModifier:i,attachment:j,targetAttachment:k,targetOffset:g,offset:b.getTetherOffset(e,f),element:a,constraints:[{to:"window",attachment:"none none"}]}}},watchers:{position:function(){j=e(function(){i[p]&&i[p].element&&(1===o.length?h.newMode("normal"):i[p].element.classList.contains("tether-out-of-bounds")?h.newMode("try-another"):h.newMode("normal"))},100)},elementHtml:function(){l=e(function(){var a=f.html();a!==m&&(m=a,r.render.newHtml())},100)},targetElementPosition:function(){k=e(function(){c.targetPosition=h.selectors.$target.offset()},50),c.$watch("targetPosition",function(a){a&&i[p].position()},function(a,b){return a.top!==b.top||a.left!==b.left})},scopeDestroy:function(){c.$on("$destroy",function(){e.cancel(j),e.cancel(k),e.cancel(l),i[p].destroy(),h.selectors[p].$contentBox&&h.selectors[p].$contentBox.detach(),h.selectors[p].$container&&h.selectors[p].$container.detach(),h.selectors[p].$pointer&&h.selectors[p].$pointer.detach()})}},selectors:{$target:a.element(document.querySelector(g.target))},render:{contentBox:function(c){var d=(b.getPointer,b.getPopoverMargins),e=(b.getContainerPaddings,n),g=a.element(f).clone(!0,!0);g.css({opacity:"","pointer-events":"",position:"",right:""}),g.css(d(e.position,e.pointerHeight)),h.selectors[c].$contentBox&&h.selectors[c].$contentBox.detach(),h.selectors[c].$container.append(g);var i=h.selectors[c].$container[0].childNodes[1];
h.selectors[c].$contentBox=a.element(i)},popoverContainer:function(c){var d=b.getPointer,e=(b.getPopoverMargins,b.getContainerPaddings),f=n,g=$('<div class="cui-popover__container"></div>'),j=d(f);g.css(e(f)),h.selectors[c].$container=g,h.selectors[c].$container[0].style.opacity="0",g.append(j),h.selectors[c].$pointer=j,r.render.contentBox(c),a.element(document.body).append(g),i[c]=new Tether(h.helpers.getTetherOptions(g,f))},newHtml:function(){r.render.contentBox(p)}},newMode:function(a){b.getPointer,b.getPopoverMargins,b.getContainerPaddings;switch(a){case"normal":"0"===h.selectors[p].$container[0].style.opacity&&d(function(){i[p].position(),h.selectors[p].$container[0].style.opacity="1"});break;case"try-another":h.tryAnotherPosition()}},tryAnotherPosition:function(){if("undefined"==typeof q&&0===p?q=1:"undefined"==typeof q?q=0:q++,q!==p){if(q===o.length)return void(q=void 0);if(q===o.length-1&&"hide"===o[q])return"0"===h.selectors[p].$container[0].style.opacity&&(h.selectors[p].$container[0].style.opacity="1"),void(q=void 0);"undefined"!=typeof h.selectors[q]&&delete h.selectors[q],h.selectors[q]={};var a=o[q];h.config(a),h.render.popoverContainer(q),i[q].element.classList.contains("tether-out-of-bounds")?(h.selectors[q].$container.detach(),i[q].destroy(),delete h.selectors[q]):(h.selectors[p].$container.detach(),i[p].destroy(),delete h.selectors[p],p=q,q=void 0,"0"===h.selectors[p].$container[0].style.opacity&&(h.selectors[p].$container[0].style.opacity="1"))}}};r.init()}}}}}]),a.module("cui-ng").directive("cuiResizeHandler",["$cuiResizeHandler","$window",function(a,b){return{restrict:"E",transclude:!0,scope:{showIf:"=",breakpoint:"="},link:function(c,d,e){var f=function(a){c.breakpoint?e.hasOwnProperty("mobile")&&b.innerWidth<c.breakpoint?c.showIf=!0:e.hasOwnProperty("desktop")&&b.innerWidth>=c.breakpoint?c.showIf=!0:c.showIf=!1:e.hasOwnProperty("mobile")&&b.innerWidth<a?c.showIf=!0:e.hasOwnProperty("desktop")&&b.innerWidth>=a?c.showIf=!0:c.showIf=!1,c.$evalAsync(c)},g=function(){return c.breakpoint?c.breakpoint:a.breakpoint},h=_.throttle(function(){a.callHandlers()},300);a.setHandler(c.$id,f,g()),a.callHandlers(),b.onresize=h,c.$on("$destroy",function(){a.destroyElement(c.$id)})},template:'\n			<div ng-if="showIf"><ng-transclude></ng-transclude></div>\n		'}}]),a.module("cui-ng").provider("$cuiResizeHandler",function(){var a=this,b={};this.breakpoint=700,this.setHandler=function(a,c,d){b[a]={handler:c,breakpoint:d}},this.getHandler=function(a){return b[a]},this.callHandlers=function(){for(var a in b)b[a].handler(b[a].breakpoint)},this.destroyElement=function(a){delete b[a]},this.setBreakpoint=function(b){a.breakpoint=b},this.getBreakpoint=function(){return a.breakpoint},this.$get=function(){return a}});var b={cuiTreeNest0Class:"cui-tree--nesting-0",cuiTreeNestXClass:"cui-tree--nested",cuiTreeLeafWrapper:'<div class="cui-tree__leaf"></div>',cuiTreeLastLeafClass:"cui-tree__leaf--last",cuiTreeBranchWrapper:'<div class="cui-tree__branch"></div>',cuiTreeLastBranchClass:"cui-tree__branch--last",cuiTreeNestPrefix:"cui-tree--nesting-"},c={getDisplayValue:function(a,b,c){var d=b.cuiTreeLeafDisplay;d.split("+");return a.$eval(d,{object:c})},getClassListForNestingLevel:function(a,c){var d=a.cuiTreeNestPrefix,e=a.cuiTreeNest0Class,f=a.cuiTreeNestXClass,g=[];switch(c){case 0:g.push(e||b.cuiTreeNest0Class);break;default:g.push((d||b.cuiTreeNestPrefix)+c),g.push(f||b.cuiTreeNestXClass)}return g},getElements:function i(a,d,e,f){var g=arguments.length<=4||void 0===arguments[4]?0:arguments[4],i=c.getElements,h=c.getDisplayValue,j=c.getClassListForNestingLevel,k=d.cuiTreeBranchWrapper,l=d.cuiTreeLeafWrapper,m=d.cuiTreeLastLeafClass,n=d.cuiTreeLastBranchClass,o=$("<div></div>");return j(d,g).forEach(function(a){return o[0].classList.add(a)}),e.forEach(function(c,j){var p=$("<span>"+h(a,d,c)+"</span>"),q=$(l||b.cuiTreeLeafWrapper);if(f&&q[0].addEventListener("click",function(a){f(c,this,a)},!0),q.append(p),j===e.length-1&&q[0].classList.add(m||b.cuiTreeLastLeafClass),c.children){var r=$(k||b.cuiTreeBranchWrapper).append(q);j===e.length-1&&r[0].classList.add(n||b.cuiTreeLastBranchClass),r.append(i(a,d,c.children,f,g+1)),o.append(r)}else o.append(q)}),o}},d={pre:function(a,b,d){var e=void 0,f=a.$eval(d.cuiTreeLeafClickCallback),g=function(g){e&&(e.detach(),e.children().unbind()),e=c.getElements(a,d,g,f),b.append(e)};a.$watch(function(){return a.$eval(d.cuiTree)},function(a){a&&g(a)},!0),a.$on("$destroy",function(){e.children().unbind()})}};a.module("cui-ng").directive("cuiTree",[function(){return{restrict:"A",scope:!0,compile:function(){return d}}}]),a.module("cui-ng").directive("cuiWizardProto",["$timeout","$compile","$window","$rootScope","$document",function(b,c,d,e,f){return{restrict:"E",scope:!0,link:function(f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v=function(){j=[],k=void 0!==h.mobileStack,l=a.element(g[0].querySelectorAll("step")),i=l.length,m=void 0!==h.bar&&1!==i,n=a.element(g[0].querySelector("indicator-container")),n.append('<div class="cui-steps"></div>'),u=a.element(n[0].querySelector(".cui-steps")),d=a.element(d),f.currentStep=Number(g[0].attributes.step.value),o=h.clickableIndicators,p=h.minimumPadding,q=a.element(document.querySelector("snap-content")),r=a.element("body"),f.wizardFinished=!1,f.next=function(a){a?f.goToState(a):(f.currentStep++,y(),z(),L()),f.wizardFinished||f.currentStep!==i||(f.wizardFinished=!0),J()},f.previous=function(a){a?f.goToState(a):(f.currentStep--,y(),z(),L()),J()},f.goToStep=function(a){a!==f.currentStep&&(f.currentStep=a,y(),z(),L(),J(),f.wizardFinished||f.currentStep!==i||(f.wizardFinished=!0))},f.goToState=function(a){"default"!==a&&e.$broadcast("stepChange",{state:a})},f.nextWithErrorChecking=function(b,c){b.$valid?(j[f.currentStep]=!1,J(),c?f.goToState(c):f.next()):(a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$setTouched()})}),j[f.currentStep]=!0)},isNaN(f.currentStep)?f.currentStep=1:f.currentStep>i?f.currentStep=i:f.currentStep<1&&(f.currentStep=1),w(),x(),k&&A(),m&&z(),y(),G(),H(),I(),M()},w=function(){var b=[],d=[];f.defaultString="default",f.stepStates=[];for(var e=0;i>e;e++)b[e]=l[e].attributes.title.value,l[e].attributes.state&&(f.stepStates[e]=""+l[e].attributes.state.value),l[e].attributes.icon&&(d[e]=""+l[e].attributes.icon.value);f.icons=[],b.forEach(function(e,g){var h;void 0!==d[g]&&(d[g].indexOf(".")>-1?f.icons[g]='<div class="icon-container"><div class="icon"><img src="'+d[g]+'" class="cui-icon-rotate"/></div></div>':f.icons[g]='<div class="icon-container"><div class="icon"><cui-icon cui-svg-icon="'+d[g]+'" svg-class="cui-icon-rotate"></cui-icon></div></div>'),void 0!==o&&void 0!==f.icons[g]?(h=a.element('<span class="step-indicator" id="cui-wizard-ref-pointer-'+g+'" ng-click="goToStep('+(g+1)+");goToState('"+(f.stepStates[g]||f.defaultString)+"')\">"+b[g]+f.icons[g]+"</span>"),h[0].style.cursor="pointer"):void 0===o||f.icons[g]?h=a.element('<span class="step-indicator" id="cui-wizard-ref-pointer-'+g+'">'+b[g]+(f.icons[g]?f.icons[g]:"")+"</span>"):(h=a.element('<span class="step-indicator" id="cui-wizard-ref-pointer-'+g+'" ng-click="goToStep('+(g+1)+");goToState('"+(f.stepStates[g]||f.defaultString)+"')\">"+b[g]+"</span>"),h[0].style.cursor="pointer");var i=c(h)(f);u.append(i)}),f.$indicators=a.element(g[0].querySelectorAll(".step-indicator"))},x=function(){m&&(a.element(n).append('<div class="steps-bar"></div>'),f.$bar=$(".steps-bar"),f.$bar[0].innerHTML='<div class="steps-bar-fill"></div>',f.$barFill=$(".steps-bar-fill"))},y=function(){b(function(){for(var a=0;a<l.length;a++)l[a].classList.remove("active"),f.$indicators[a].classList.remove("active"),k&&s[a].classList.remove("expanded"),a<f.currentStep-1?(f.$indicators[a].classList.add("visited"),k&&s[a].classList.add("visited")):(f.$indicators[a].classList.remove("visited"),k&&s[a].classList.remove("visited"));l[f.currentStep-1].classList.add("active"),f.$indicators[f.currentStep-1].classList.add("active"),k&&s[f.currentStep-1].classList.add("expanded")})},z=function(){m&&b(function(){f.$bar[0].style.left=f.$indicators[0].scrollWidth/2+"px",f.$bar[0].style.right=f.$indicators[f.$indicators.length-1].scrollWidth/2+"px",1==f.currentStep?f.$barFill[0].style.width="0px":f.$barFill[0].style.width=f.$indicators[f.currentStep-1].offsetLeft-f.$indicators[0].scrollWidth/2+f.$indicators[f.currentStep-1].scrollWidth/2+"px"})},A=function(){a.forEach(l,function(b,d){var e;b.innerHTML.indexOf("<!-- ngInclude:")>-1&&(e=b.innerHTML.split("<!-- ngInclude:")[1].split(" -->")[0]),b.classList.add("desktop-element");var h=c('<cui-expandable class="cui-expandable mobile-element"><cui-expandable-title class="cui-expandable__title"'+(void 0!==o?'ng-click="goToStep('+(d+1)+");goToState('"+(f.stepStates[d]||f.defaultString)+"')\">":">")+(f.icons[d]?f.icons[d]:"")+"<span>"+b.title+'</span></cui-expandable-title><cui-expandable-body class="cui-expandable__body">'+(e?'<div ng-include="'+e+'"></div>':b.innerHTML)+"</cui-expandable-body></cui-expandable>")(f);a.element(g[0]).append(h)}),s=a.element(g[0].querySelectorAll("cui-expandable.mobile-element"))},B=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},C=function(){for(var a=0,b=0;i>b;b++)a+=f.$indicators[b].scrollWidth;return a+(Number(p)||0)*(i-1)},D=function(){return n[0].clientWidth},E=function(){n[0].classList.add("small"),z()},F=function(){n[0].classList.remove("small"),z()},G=B(function(){z();var a=C(),b=D();a>b&&b<Math.max(f.indicatorsWidth||0,a)?(f.indicatorsWidth=a,E()):b>f.indicatorsWidth&&F()},40),H=function(){d.bind("resize",function(){G()})},I=function(){f.$on("languageChange",function(){F(),G()})},J=function(){var b;if(t=a.element(g[0].querySelector("cui-expandable.mobile-element>cui-expandable-title")),0!==t.length)var c=t[0].clientHeight;else var c=0;if(0!==q.length){var d=q.scrollTop();b=g[0].getBoundingClientRect().top,K(d+b+c*(f.currentStep-1))}else{var e=r.scrollTop();b=g[0].getBoundingClientRect().top,K(e+b+c*(f.currentStep-1))}},K=function(a){0!==q.length?q.animate({scrollTop:a},300,"linear"):r.animate({scrollTop:a},300,"linear")},L=function(){h.$set("step",f.currentStep)},M=function(){h.$observe("step",function(a){isNaN(a)?f.currentStep=1:a>i?f.currentStep=i:1>a?f.currentStep=1:f.currentStep=a,y()})};v()}}}]),a.module("cui-ng").directive("cuiWizard",["$timeout","$compile","$window","$rootScope",function(b,c,d,e){return{restrict:"E",scope:!0,link:function(f,g,h){var i={initScope:function(){Object.keys(i.scope).forEach(function(a){f[a]=i.scope[a]})},config:{bar:void 0!==h.bar,clickableIndicators:void 0!==h.clickableIndicators,dirtyValidation:void 0!==h.dirtyValidation,minimumPadding:h.minimumPadding||0,mobileStack:void 0!==h.mobileStack,mobileStackBreakingPoint:parseInt(h.mobileStack)},selectors:{$wizard:a.element(g[0]),$steps:a.element(g[0].querySelectorAll("step")),$indicatorContainer:a.element(g[0].querySelectorAll("indicator-container")),$window:a.element(d),$body:a.element("body")},helpers:{isFormValid:function(a){return i.config.dirtyValidation&&!a.$valid?(i.helpers.setErrorFieldsToDirty(a),!1):a.$valid?!0:(i.helpers.setErrorFieldsToTouched(a),!1)},setErrorFieldsToDirty:function(b){a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$setDirty()})})},setErrorFieldsToTouched:function(b){a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$setTouched()})})},getStepInfo:function(a){var b=i.selectors.$steps[a];return{stepTitle:b.attributes["step-title"].value,icon:b.attributes.icon?b.attributes.icon.value:!1,state:b.attributes.state?b.attributes.state.value:!1}},getIconMarkup:function(a){if(!a)return"";var b=void 0;switch(a.indexOf(".")){case-1:b='<cui-icon cui-svg-icon="'+a+'" svg-class="icon-svg"></cui-icon>';break;default:b='<img src="'+a+'" class="cui-icon-rotate"/>'}return'<div class="icon-container">\n                                    <div class="icon">\n                                        '+b+"\n                                    </div>\n                                </div>"},getNgClickForIndicator:function(a,b){return i.config.clickableIndicators?'ng-click="goToStep('+(a+1)+(","+b||"")+')"':""},getIndicatorMarkup:function(a){var b=i.helpers.getStepInfo(a),c=void 0;return c=a+1===i.scope.currentStep?"active":a+1<i.scope.currentStep?"visited":"",'<span class="step-indicator '+c+'" '+i.helpers.getNgClickForIndicator(a,b.state)+'>\n                                    <span class="step-indicator__title">'+b.stepTitle+"</span> "+i.helpers.getIconMarkup(b.icon)+"\n                                </span>"},getIndicatorsWidth:function(){var a=0;return i.selectors.$indicators.each(function(b,c){a+=$(c).width()}),a},thereIsRoomForIndicators:function(){return i.helpers.getIndicatorsWidth()+i.config.minimumPadding*(i.config.numberOfSteps-1)<i.selectors.$indicatorContainer.width()?!0:!1},debounce:function(a,b,c){var d=void 0;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},resizeHandler:function(){i.helpers.debounce(function(){i.config.bar&&i.reRender.bar(i.scope.currentStep),i.helpers.thereIsRoomForIndicators()&&i.config.stepsCollapsed?(i.config.stepsCollapsed=!1,i.selectors.$indicatorContainer.removeClass("small")):i.helpers.thereIsRoomForIndicators()||i.config.stepsCollapsed||(i.config.stepsCollapsed=!0,i.selectors.$indicatorContainer.addClass("small")),i.config.mobileStack&&i.selectors.$window.width()<=i.config.mobileStackBreakingPoint&&!i.config.mobileMode?(i.selectors.$expandables.forEach(function(a,b){a.attr("transition-speed",300),a.addClass("mobile-element")}),i.config.mobileMode=!0):i.config.mobileStack&&i.selectors.$window.width()>i.config.mobileStackBreakingPoint&&i.config.mobileMode&&(i.selectors.$expandables.forEach(function(a,b){a.attr("transition-speed",0),a.removeClass("mobile-element")}),i.config.mobileMode=!1)},200)()},scrollToStep:function(b){var c=a.element(i.selectors.$expandables[0].children()[0]),d=c.offset(),e=c[0].scrollHeight;i.selectors.$body.animate({scrollTop:d.top+e*(b-1)},300,"linear")}},scope:{currentStep:Number(g[0].attributes.step.value),wizardFinished:!1,next:function(a){a?i.scope.goToState(a):i.update(i.scope.currentStep+1)},nextWithErrorChecking:function(a,b){i.helpers.isFormValid(a)&&i.scope.next(b)},previous:function(a){a?i.scope.goToSate(a):i.update(i.scope.currentStep-1)},goToStep:function(a,b){a!==i.scope.currentStep&&(b&&i.scope.goToState(b),i.update(a))},goToState:function(a){e.$broadcast("stepChange",{state:a,element:g})}},watchers:{init:function(){i.watchers.windowResize(),i.watchers.languageChange()},windowResize:function(){i.selectors.$window.bind("resize",i.helpers.resizeHandler)},languageChange:function(){f.$on("languageChange",function(){i.helpers.thereIsRoomForIndicators()&&i.config.stepsCollapsed?(i.config.stepsCollapsed=!1,i.selectors.$indicatorContainer.removeClass("small")):i.helpers.thereIsRoomForIndicators()||i.config.stepsCollapsed||(i.config.stepsCollapsed=!0,i.selectors.$indicatorContainer.addClass("small")),i.config.bar&&i.reRender.bar(i.scope.currentStep)})}},render:{indicators:function(){i.selectors.$indicatorContainer.append('<div class="cui-steps"></div>'),i.selectors.$stepIndicatorContainer=a.element(i.selectors.$indicatorContainer[0].querySelector(".cui-steps")),i.selectors.$steps.each(function(b,d){var e=a.element(i.helpers.getIndicatorMarkup(b)),g=c(e)(f);i.selectors.$stepIndicatorContainer.append(g)}),i.selectors.$indicators=a.element(i.selectors.$stepIndicatorContainer[0].querySelectorAll(".step-indicator")),i.config.numberOfSteps=i.selectors.$indicators.length},bar:function(){b(function(){i.selectors.$indicatorContainer.append('<div class="steps-bar"><div class="steps-bar-fill"></div></div>'),i.selectors.$bar=a.element(i.selectors.$indicatorContainer[0].querySelector(".steps-bar")),i.selectors.$barFill=a.element(i.selectors.$indicatorContainer[0].querySelector(".steps-bar-fill")),i.selectors.$bar[0].style.left=i.selectors.$indicators[0].scrollWidth/2+"px",i.selectors.$bar[0].style.right=i.selectors.$indicators[i.config.numberOfSteps-1].scrollWidth/2+"px",1===i.scope.currentStep?i.selectors.$barFill[0].style.width="0px":i.selectors.$barFill[0].style.width=i.selectors.$indicators[i.scope.currentStep-1].offsetLeft-i.selectors.$indicators[0].scrollWidth/2+i.selectors.$indicators[i.scope.currentStep-1].scrollWidth/2+"px"})},steps:function(){i.config.mobileStack&&(i.selectors.$expandables=[],i.selectors.$steps.each(function(a,b){var d=(i.helpers.getStepInfo(a),"");i.scope.currentStep===a+1&&($(b).addClass("active"),d="expanded");var e=$(c('<cui-expandable class="cui-expandable cui-expandable--wizard '+d+'" transition-speed="0">\n                                    <cui-expandable-title class="cui-expandable__title cui-expandable__title--wizard">\n                                        '+i.helpers.getIndicatorMarkup(a)+'\n                                    </cui-expandable-title>\n                                    <cui-expandable-body class="cui-expandable__body cui-expandable__body--wizard"></cui-expandable-body>\n                                </cui-expandable>')(f));e.insertBefore(b),$(b).detach().appendTo(e.children()[1]),i.selectors.$expandables.push($(b).parent().parent())}))}},reRender:{indicators:function(a,b){i.selectors.$indicators.each(function(b,c){a>b+1?$(c).addClass("visited"):$(c).removeClass("visited")}),i.selectors.$indicators[b-1].classList.remove("active"),i.selectors.$indicators[a-1].classList.add("active")},steps:function(a,b){i.selectors.$expandables.forEach(function(b,c){a>c+1?b.addClass("visited"):b.removeClass("visited")}),i.selectors.$steps[b-1].classList.remove("active"),i.selectors.$steps[a-1].classList.add("active"),i.selectors.$expandables[b-1].removeClass("expanded"),i.selectors.$expandables[a-1].addClass("expanded"),i.selectors.$expandables[b-1][0].querySelector(".step-indicator").classList.remove("active"),i.selectors.$expandables[a-1][0].querySelector(".step-indicator").classList.add("active")},indicatorContainer:function(){i.helpers.thereIsRoomForIndicators()&&i.config.stepsCollapsed?(i.config.stepsCollapsed=!1,i.selectors.$indicatorContainer.removeClass("small")):i.helpers.thereIsRoomForIndicators()||i.config.stepsCollapsed||(i.config.stepsCollapsed=!0,i.selectors.$indicatorContainer.addClass("small"))},bar:function(a){1===a?i.selectors.$barFill[0].style.width="0px":i.selectors.$barFill[0].style.width=i.selectors.$indicators[a-1].offsetLeft-i.selectors.$indicators[0].scrollWidth/2+i.selectors.$indicators[a-1].scrollWidth/2+"px"}},update:function(a,b){i.config.mobileMode&&i.helpers.scrollToStep(a),i.reRender.indicators(a,i.scope.currentStep),i.config.mobileStack&&i.reRender.steps(a,i.scope.currentStep),i.config.bar&&i.reRender.bar(a),f.currentStep=i.scope.currentStep=a,a===i.config.numberOfSteps&&(f.wizardFinished=i.scope.wizardFinished=!0),h.$set("step",a)}};i.initScope(),i.render.indicators(),i.config.bar&&i.render.bar(),i.render.steps(),i.watchers.init(),i.selectors.$window.resize()}}}]),a.module("cui-ng").directive("customError",["$q",function(b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){var g={},h=!1,i=0,j=function(a,b,c){var d=b.split(".");d.forEach(function(b,e){e<d.length-1?a=a[b]:a[b]=c})},k=function(){h=!0,i++,e.customErrorLoading&&j(c.$parent,e.customErrorLoading,!0)},l=function(){h=!1,e.customErrorLoading&&j(c.$parent,e.customErrorLoading,!1)};c.$watch(function(){return f.$modelValue},function(d,h){a.forEach(c.$eval(e.customError),function(a,c){var e=a(d);"boolean"==typeof e?f.$setValidity(c,e):(k(),g[c]?g[c].push(e.promise):g[c]=[e.promise],b.all(g[c]).then(function(a){f.$setValidity(c,e.valid(a[g[c].length-1])),l()},function(a){e["catch"]&&e["catch"](a),l()}))})},function(a,b){return a!==b})}}}]),a.module("cui-ng").directive("focusIf",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){var e=c[0],f=function(c){c&&a(function(){e.focus()},b.$eval(d.focusDelay)||0)};d.focusIf?b.$watch(d.focusIf,f):f(!0)}}}]),a.module("cui-ng").directive("inlineEdit",["$compile","$timeout","$filter",function(b,c,d){return{restrict:"E",scope:{model:"=",type:"@",options:"=",display:"=",localData:"=",saveCallback:"&onSave",tempEditCallback:"&onEdit",hideSaveButton:"=hideSaveIf"},link:function(d,e,f){var g={init:function(){a.forEach(g.scope,function(a){a()})},config:{valueClass:f.valueClass||"cui-field-val__val",inputClass:f.inputClass||"cui-field-val__val",labelClass:f.labelClass||"cui-field-val__field",wrapperClass:f.wrapperClass||"cui-field-val"},scope:{init:function(){d.edit=!1,d.focus=!1},functions:function(){d.toggleEdit=function(){d.focus=d.edit=!d.edit,d.tempEditCallback&&d.editChangeCallback(d.edit)},d.matchModels=function(){d.editInput=d.model},d.saveInput=function(){d.model=d.editInput,d.saveCallback()&&c(function(){d.saveCallback()()}),g.helpers.setDisplayValue()},d.parseKeyCode=function(a){switch(event.which){case 13:d.saveInput(),d.toggleEdit();break;case 27:d.toggleEdit()}},d.editChangeCallback=function(a){return a===!1?void(d.tempEditCallback()&&d.tempEditCallback()(void 0)):void(d.tempEditCallback()&&d.tempEditCallback()(d.editInput))}},watchers:function(){d.$watch("display",g.helpers.setDisplayValue),d.$watch("model",g.helpers.setDisplayValue)}},helpers:{getLabel:function(){if(void 0!==f.label)return"{{'"+f.label+"'| translate}}";if(void 0!==f.name)return f.name;throw new Error("Inline-edit needs 1 of the following attributes: label or name.")},getInput:function(){switch(f.type=f.type||"text",f.type){case"dropdown":return'<select ng-model="$parent.editInput" class="'+g.config.inputClass+'" ng-init="matchModels()" ng-options="'+f.optionsExpression+'"\n                  ng-if="edit" ng-change="editChangeCallback()"></select>';case"auto-complete":return'<div auto-complete selected-object="$parent.editInput" local-data="localData" search-fields="'+f.searchFields+'"\n                  title-field="'+f.titleField+'" input-class="'+g.config.inputClass+'" match-class="highlight" ng-init="matchModels()" auto-match="true"\n                  ng-if="edit" ng-keypress="parseKeyCode($event)" initial-value="$parent.editInput.title" input-changed="editChangeCallback()"></div>';default:return'<input type="'+f.type+'" ng-model="$parent.editInput" class="'+g.config.inputClass+'"\n                  ng-init="matchModels()" ng-if="edit" ng-keyup="parseKeyCode($event)" focus-if="focus" ng-change="editChangeCallback()"/>'}},setDisplayValue:function(){"password"===f.type?d.displayValue=Array(d.model?d.model.length+1:0).join(""):d.displayValue=d.display||d.model}},render:function(){var c=b('<div class="'+g.config.wrapperClass+'">\n                <span class="'+g.config.labelClass+'">'+g.helpers.getLabel()+'</span>\n                <span ng-if="!edit" class="'+g.config.valueClass+'">{{displayValue}}</span>'+g.helpers.getInput()+'\n            </div>\n            <span class="cui-link" ng-click="toggleEdit()" ng-if="!edit">{{"cui-edit" | translate}}</span>\n            <span class="cui-link" ng-if="edit && !hideSaveButton" ng-click="saveInput();toggleEdit();">{{"cui-update" | translate}}</span>\n            <span class="cui-link" ng-if="edit" ng-click="toggleEdit()">{{"cui-cancel" | translate}}</span>')(d);a.element(e[0]).html(c)}};g.init(),g.render()}}}]),a.module("cui-ng").directive("match",["$parse",function(b){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f=function(a){e.$setValidity("match",a[0]===(a[1]||""))};b.$watch(function(){return[b.$eval(d.match),e.$viewValue]},f,function(b,c){return!a.equals(b,c)})}}}]),a.module("cui-ng").directive("offClickFilter",["OffClickFilterCache","$parse",function(a,b){var c=void 0;return{restrict:"A",compile:function(d,e){return function(d,f){c=b(e.offClickFilter)(d).split(",").map(function(a){return a.trim()}),c.forEach(function(b){a[b]?a[b].push(f[0]):a[b]=[f[0]]}),d.$on("$destroy",function(){c.forEach(function(b){a[b].length>1?a[b].splice(a[b].indexOf(f[0]),1):(a[b]=null,delete a[b])}),f=null})}}}}]),a.module("cui-ng").directive("offClick",["$rootScope","$parse","OffClickFilterCache",function(b,c,d){var e=0,f={},g=!1,h=function(a,b){if(!a||!b)return!1;for(var c=b.length,d=0;c>d;++d){var e=b[d],f=!1;try{f=e.contains(a)}catch(g){"undefined"!=typeof e.compareDocumentPosition&&(f=e===a||Boolean(16&e.compareDocumentPosition(a)))}if(f)return!0}return!1},i=function(c){if("touchmove"===c.type)return g=!0,!1;if(g)return g=!1,!1;var e=c.target||c.srcElement;a.forEach(f,function(f,g){var i=d["*"]||[];f.elm.id&&""!==f.elm.id&&d["#"+f.elm.id]&&(i=i.concat(d["#"+f.elm.id])),a.forEach(f.elm.classList,function(a){d["."+a]&&(i=i.concat(d["."+a]))}),f.elm.contains(e)||h(e,i)||b.$evalAsync(function(){f.cb(f.scope,{$event:c})})})};return document.addEventListener("touchmove",i,!0),document.addEventListener("touchend",i,!0),document.addEventListener("click",i,!0),{restrict:"A",compile:function(a,d){var g=c(d.offClick),h=e++,i=void 0;return function(a,e){var j=function(){f[h]={elm:e[0],cb:g,scope:a}},k=function(){f[h]=null,delete f[h]};d.offClickIf?i=b.$watch(function(){return c(d.offClickIf)(a)},function(a){a&&j()||!a&&k()}):j(),a.$on("$destroy",function(){k(),i&&i(),e=null})}}}}]),a.module("cui-ng").factory("OffClickFilterCache",function(){var a={};return a}),a.module("cui-ng").directive("onEnter",["$timeout",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){c.bind("keydown keypress",function(c){13===c.which&&!function(){c.preventDefault();var f=b.$eval(d.onEnter);a(function(){f(e.$viewValue)})}()}),b.$on("destroy",function(){c.unbind()})}}}]),a.module("cui-ng").directive("paginate",["$compile","$timeout","$interval",function(b,c,d){return{restrict:"AE",scope:{resultsPerPage:"&",count:"&",onPageChange:"&",page:"=ngModel",attachRerenderTo:"="},link:function(e,f,g){var h=void 0,i={initScope:function(){e.paginate={currentPage:e.page?i.helpers.normalizePage(e.page):1},i.helpers.updateConfig(),i.render.pageContainer(),g.attachRerenderTo&&(e.attachRerenderTo=i.scope.updateConfigAndReRender),a.forEach(i.scope,function(a,b){e.paginate[b]=a})},selectors:{$paginate:a.element(f[0])},config:{pageClass:g.pageClass||"cui-paginate__page",activePageClass:g.activePageClass||"cui-paginate__page--active",ellipsesClass:g.ellipsesClass||"cui-paginate__ellipses",previousClass:g.previousNextClass||"cui-paginate__previous",nextClass:g.previousNextClass||"cui-paginate__next",pageContainerClass:g.pageContainerClass||"cui-paginate__page-container",ellipsesButton:g.ellipses||"...",previousButton:g.previousButton||"",nextButton:g.nextButton||""},watchers:{resultsPerPage:function(){e.$watch(e.resultsPerPage,function(a,b){a&&b&&a!==b&&(e.page=e.paginate.currentPage=1,i.helpers.updateConfig(),i.scope.reRender(),c(function(){e.onPageChange()&&e.onPageChange()(e.paginate.currentPage)}))})},page:function(){e.$watch("page",function(a,b){a&&a!==e.paginate.currentPage&&(e.page=e.paginate.currentPage=i.helpers.normalizePage(a),i.helpers.updateConfig(),i.scope.reRender())})},paginateResize:function(){h=d(i.helpers.resizeHandler,50)},scopeDestroy:function(){e.$on("$destroy",function(){d.cancel(h)})}},helpers:{updateConfig:function(){i.config.numberOfPages=i.helpers.getNumberOfPages(),i.config.howManyPagesWeCanShow=i.helpers.howManyPagesWeCanShow()},getNumberOfPages:function(){return Math.ceil(e.count()/e.resultsPerPage())},getWidthOfAPage:function(){return i.helpers.getWidthOfElement($(i.render.pageNumber(1)))},getAvailableSpaceForPages:function(){var a=i.config.width||i.selectors.$paginate.width(),b=i.helpers.getWidthOfElement(i.render.previousButton()),c=i.helpers.getWidthOfElement(i.render.nextButton());return a-(b+c)-1},getWidthOfElement:function(a){a.appendTo(document.body);var b=a.outerWidth(!0);return a.remove(),b},howManyPagesWeCanShow:function(){return Math.floor(i.helpers.getAvailableSpaceForPages()/i.helpers.getWidthOfAPage())},handleStepChange:function(){e.page=e.paginate.currentPage=i.helpers.normalizePage(e.paginate.currentPage),c(function(){e.onPageChange()&&e.onPageChange()(e.paginate.currentPage),i.scope.reRender()})},resizeHandler:function(){i.config.width?i.selectors.$paginate.width()!==i.config.width&&(i.config.width=i.selectors.$paginate.width(),i.helpers.updateConfig(),i.scope.reRender()):i.config.width=i.selectors.$paginate.width()},whatEllipsesToShow:function(){return i.config.numberOfPages<=i.config.howManyPagesWeCanShow?"none":e.paginate.currentPage<i.config.howManyPagesWeCanShow/2+1?"right":e.paginate.currentPage<i.config.numberOfPages-i.config.howManyPagesWeCanShow/2?"both":"left"},normalizePage:function(a){var b=parseInt(a);return b<=i.config.numberOfPages&&b>=1?b:1>b?(console.log("it works!"),1):i.config.numberOfPages}},scope:{previous:function(){e.paginate.currentPage>1&&(e.paginate.currentPage--,i.helpers.handleStepChange())},next:function(){e.paginate.currentPage+1<=i.config.numberOfPages&&(e.paginate.currentPage++,i.helpers.handleStepChange())},goToPage:function(a){a!==e.paginate.currentPage&&(e.paginate.currentPage=i.helpers.normalizePage(a),i.helpers.handleStepChange())},reRender:function(){i.selectors.$pageContainer.replaceWith(i.render.pageContainer())},updateConfigAndReRender:function(){i.helpers.updateConfig(),e.paginate.currentPage>i.config.numberOfPages?(e.page=e.paginate.currentPage=i.helpers.normalizePage(e.paginate.currentPage),i.scope.reRender()):i.scope.reRender()}},render:{init:function(){var a=i.helpers.getNumberOfPages();1===a&&console.log("it works"),i.selectors.$paginate.append(i.render.previousButton()),i.selectors.$paginate.append(i.render.pageContainer()),i.selectors.$paginate.append(i.render.nextButton())},previousButton:function j(){var j=b('<span ng-click="paginate.previous()" class="'+i.config.previousClass+'">\n                                '+i.config.previousButton+"\n                            </span>")(e);return j},nextButton:function k(){var k=b('<span ng-click="paginate.next()" class="'+i.config.nextClass+'">\n                                '+i.config.nextButton+"\n                            </span>")(e);return k},ellipses:function l(a){var c='ng-click="paginate.goToPage('+a+')"',l=b("<span "+c+' class="'+i.config.ellipsesClass+'">'+i.config.ellipsesButton+"</span>")(e);return l},pageNumber:function(a,c){var d=void 0,f=void 0;f='ng-click="paginate.goToPage('+a+')"',d=c?""+i.config.activePageClass:"";var g=b("<span "+f+' class="'+i.config.pageClass+" "+d+'">'+a+"</span>")(e);return g},pagesXToY:function(a,b){var c=[];do{var d=i.render.pageNumber(a,a===(e.paginate.currentPage||e.page));c.push(d),a++}while(b>=a);return c},pageNumbers:function(){var a=i.helpers.whatEllipsesToShow(),b=[];switch(a){case"none":b.push(i.render.pagesXToY(1,i.config.numberOfPages));break;case"right":var c=i.config.howManyPagesWeCanShow-1;b.push(i.render.pagesXToY(1,c-1)),b.push(i.render.ellipses(c)),b.push(i.render.pageNumber(i.config.numberOfPages));break;case"left":var d=i.config.numberOfPages-(i.config.howManyPagesWeCanShow-2);b.push(i.render.pageNumber(1)),b.push(i.render.ellipses(d)),b.push(i.render.pagesXToY(d+1,i.config.numberOfPages));break;case"both":var f=e.paginate.currentPage-(Math.ceil(i.config.howManyPagesWeCanShow/2)-2),g=e.paginate.currentPage+(Math.floor(i.config.howManyPagesWeCanShow/2)-1);b.push(i.render.pageNumber(1)),b.push(i.render.ellipses(f)),b.push(i.render.pagesXToY(f+1,g-1)),b.push(i.render.ellipses(g)),b.push(i.render.pageNumber(i.config.numberOfPages))}return b},pageContainer:function m(){var m=$('<span class="'+i.config.pageContainerClass+'"></span>');return i.selectors.$pageContainer=m,i.render.pageNumbers().forEach(function(a){m.append(a)}),m}}};c(function(){i.initScope(),i.render.init(),a.forEach(i.watchers,function(a){a()})})}}}]),a.module("cui-ng").factory("CuiPasswordInfo",[function(){var a={},b={};return{info:b,policies:a}}]).factory("CuiPasswordValidators",["CuiPasswordInfo",function(a){RegExp.escape=function(a){
return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var b=function(b,d){return a.info[d]={},{lowercase:function(a,e){return a?c(b,d).complex(a,e)?!0:/.*[a-z].*/.test(e):!1},uppercase:function(a,e){return a?c(b,d).complex(a,e)?!0:/.*[A-Z].*/.test(e):!1},number:function(a,e){return a?c(b,d).complex(a,e)?!0:/.*[0-9].*/.test(e):!1},special:function(a,e){return a?c(b,d).complex(a,e)?!0:!/^[a-z0-9]+$/i.test(e):!1},complex:function(a,c){if(!a)return!1;var d=0;return b.allowLowerChars&&/.*[a-z].*/.test(c)&&d++,b.allowUpperChars&&/.*[A-Z].*/.test(c)&&d++,b.allowSpecialChars&&(/^[a-z0-9]+$/i.test(c)||d++),b.allowNumChars&&/.*[0-9].*/.test(c)&&d++,d>=b.requiredNumberOfCharClasses},lowercaseNotAllowed:function(a,b){return b?!/.*[a-z].*/.test(b):!0},uppercaseNotAllowed:function(a,b){return b?!/.*[A-Z].*/.test(b):!0},numberNotAllowed:function(a,b){return b?!/.*[0-9].*/.test(b):!0},specialNotAllowed:function(a,b){return b?/^[a-z0-9]+$/i.test(b):!0},disallowedChars:function e(c,f){if(!f)return!0;var g=!0,e=[];return b.disallowedChars.split("").forEach(function(a){f.indexOf(a)>-1&&(g=!1,e.push(a))}),a.info[d].disallowedChars=e.join(", "),g},disallowedWords:function f(c,e){if(!e)return!0;var g=!0,f=[];return b.disallowedWords.forEach(function(a){e.toUpperCase().indexOf(a.toUpperCase())>-1&&(g=!1,f.push(a))}),a.info[d].disallowedWords=f.join(", "),g},length:function(a,c){return a?c.length<=b.max&&c.length>=b.min:!1}}},c=function(c,d){var e={},f=Object.assign({},b(c,d)),g=function(){return!0};return a.policies[d]=c,e.complex=f.complex,c.allowLowerChars?(e.lowercase=f.lowercase,e.lowercaseNotAllowed=g):(e.lowercase=g,e.lowercaseNotAllowed=f.lowercaseNotAllowed),c.allowUpperChars?(e.uppercase=f.uppercase,e.uppercaseNotAllowed=g):(e.uppercase=g,e.uppercaseNotAllowed=f.uppercaseNotAllowed),c.allowNumChars?(e.number=f.number,e.numberNotAllowed=g):(e.number=g,e.numberNotAllowed=f.numberNotAllowed),c.allowSpecialChars?(e.special=f.special,e.specialNotAllowed=g):(e.special=g,e.specialNotAllowed=f.specialNotAllowed),c.disallowedChars&&(e.disallowedChars=f.disallowedChars),c.disallowedWords&&(e.disallowedWords=f.disallowedWords),(c.min||c.max)&&(e.length=f.length),e};return{getValidators:c}}]).factory("CuiPasswordPolicies",["CuiPasswordValidators","CuiPasswordInfo",function(a,b){var c={parse:function(a){var b={};return a.length?a.forEach(function(a){Object.keys(a).forEach(function(c){b[c]=a[c]})}):b=Object.assign({},a),b}};return c}]).directive("passwordValidation",["CuiPasswordPolicies","CuiPasswordValidators",function(b,c){return{require:"ngModel",scope:{passwordValidation:"="},restrict:"A",link:function(d,e,f,g){var h=d.$id;g.passwordValidationKey=h,d.$watch("passwordValidation",function(d){if(d){var e=b.parse(d),f=c.getValidators(e,h);a.forEach(f,function(a,b){g.$validators[b]=a}),g.$validate()}})}}}]).directive("passwordPopover",["CuiPasswordInfo",function(a){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngMessages.replace(".$error",".passwordValidationKey"));b.$watchCollection(function(){return a.info[e]},function(a){a&&Object.keys(a).forEach(function(c){b[c]=a[c]})}),b.$watchCollection(function(){return a.policies[e]},function(a){a&&(b.policies=Object.assign({},a))}),b.$watchCollection(function(){return b.$eval(d.ngMessages)},function(a){a&&(b.errors=Object.assign({},a))})}}}]),a.module("cui-ng").provider("$pagination",[function(){var a=this,b=void 0,c=void 0;this.setPaginationOptions=function(a){b=a},this.getPaginationOptions=function(){return b},this.setUserValue=function(a){try{localStorage.setItem("cui.resultsPerPage",a)}catch(b){}c=a},this.getUserValue=function(){try{c=parseInt(localStorage.getItem("cui.resultsPerPage"))}catch(a){}return c},this.$get=function(){return a}}]).directive("resultsPerPage",["$compile","$pagination",function(b,c){return{restrict:"E",scope:{selected:"=ngModel"},link:function(d,e,f){var g={initScope:function(){d.options=c.getPaginationOptions(),d.selected=c.getUserValue()||d.options[0],d.$watch("selected",function(a){c.setUserValue(a),d.selected=a})},config:{selectClass:f["class"]||"cui-dropdown"},render:function(){var c=b('<cui-dropdown class="'+g.config.selectClass+'" ng-model="selected" options="options"></cui-dropdown>')(d);a.element(e).replaceWith(c)}};g.initScope(),g.render()}}}]);var e={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},f=9007199254740991,g=["text","email","url"];a.module("cui-ng").directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function(b,c,d,h,i){function j(a,b,c,d){var e,f,g,h={};return e=function(b){return i.safeToString(b[a.displayProperty])},f=function(b,c){b[a.displayProperty]=c},g=function(b){var d=e(b);return d&&d.length>=a.minLength&&d.length<=a.maxLength&&a.allowedTagsPattern.test(d)&&!i.findInObjectArray(h.items,b,a.keyProperty||a.displayProperty)&&c({$tag:b})},h.items=[],h.addText=function(a){var b={};return f(b,a),h.add(b)},h.add=function(c){var d=e(c);return a.replaceSpacesWithDashes&&(d=i.replaceSpacesWithDashes(d)),f(c,d),g(c)?(h.items.push(c),b.trigger("tag-added",{$tag:c})):d&&b.trigger("invalid-tag",{$tag:c}),c},h.remove=function(a){var c=h.items[a];return d({$tag:c})?(h.items.splice(a,1),h.clearSelection(),b.trigger("tag-removed",{$tag:c}),c):void 0},h.select=function(a){0>a?a=h.items.length-1:a>=h.items.length&&(a=0),h.index=a,h.selected=h.items[a]},h.selectPrior=function(){h.select(--h.index)},h.selectNext=function(){h.select(++h.index)},h.removeSelected=function(){return h.remove(h.index)},h.clearSelection=function(){h.selected=null,h.index=-1},h.clearSelection(),h}function k(a){return-1!==g.indexOf(a)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(a,b,c){a.events=i.simplePubSub(),h.load("tagsInput",a,b,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",k],placeholder:[String,""],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,f],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,f],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),a.tagList=new j(a.options,a.events,i.handleUndefinedResult(a.onTagAdding,!0),i.handleUndefinedResult(a.onTagRemoving,!0)),this.registerAutocomplete=function(){var b=c.find("input");return{addTag:function(b){return a.tagList.add(b)},focusInput:function(){b[0].focus()},getTags:function(){return a.tagList.items},getCurrentTagText:function(){return a.newTag.text()},getOptions:function(){return a.options},on:function(b,c){return a.events.on(b,c),this}}},this.registerTagItem=function(){return{getOptions:function(){return a.options},removeTag:function(b){a.disabled||a.tagList.remove(b)}}}}],link:function(f,g,h,j){var k,l=[e.enter,e.comma,e.space,e.backspace,e["delete"],e.left,e.right],m=f.tagList,n=f.events,o=f.options,p=g.find("input"),q=["minTags","maxTags","allowLeftoverText"];k=function(){j.$setValidity("maxTags",m.items.length<=o.maxTags),j.$setValidity("minTags",m.items.length>=o.minTags),j.$setValidity("leftoverText",f.hasFocus||o.allowLeftoverText?!0:!f.newTag.text())},j.$isEmpty=function(a){return!a||!a.length},f.newTag={text:function(b){return a.isDefined(b)?(f.text=b,void n.trigger("input-change",b)):f.text||""},invalid:null},f.track=function(a){return a[o.keyProperty||o.displayProperty]},f.$watch("tags",function(a){a?(m.items=i.makeObjectArray(a,o.displayProperty),f.tags=m.items):m.items=[]}),f.$watch("tags.length",function(){k(),j.$validate()}),h.$observe("disabled",function(a){f.disabled=a}),f.eventHandlers={input:{keydown:function(a){n.trigger("input-keydown",a)},focus:function(){f.hasFocus||(f.hasFocus=!0,n.trigger("input-focus"))},blur:function(){b(function(){var a=c.prop("activeElement"),b=a===p[0],d=g[0].contains(a);(b||!d)&&(f.hasFocus=!1,n.trigger("input-blur"))})},paste:function(a){a.getTextData=function(){var b=a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData;return b?b.getData("text/plain"):d.clipboardData.getData("Text")},n.trigger("input-paste",a)}},host:{click:function(){f.disabled||p[0].focus()}},tag:{click:function(a){n.trigger("tag-clicked",{$tag:a})}}},n.on("tag-added",f.onTagAdded).on("invalid-tag",f.onInvalidTag).on("tag-removed",f.onTagRemoved).on("tag-clicked",f.onTagClicked).on("tag-added",function(){f.newTag.text("")}).on("tag-added tag-removed",function(){f.tags=m.items,j.$setDirty()}).on("invalid-tag",function(){f.newTag.invalid=!0}).on("option-change",function(a){-1!==q.indexOf(a.name)&&k()}).on("input-change",function(){m.clearSelection(),f.newTag.invalid=null}).on("input-focus",function(){g.triggerHandler("focus"),j.$setValidity("leftoverText",!0)}).on("input-blur",function(){o.addOnBlur&&!o.addFromAutocompleteOnly&&m.addText(f.newTag.text()),g.triggerHandler("blur"),k()}).on("input-keydown",function(a){var b,c,d,g,h=a.keyCode,j={};if(!i.isModifierOn(a)&&-1!==l.indexOf(h)){if(j[e.enter]=o.addOnEnter,j[e.comma]=o.addOnComma,j[e.space]=o.addOnSpace,b=!o.addFromAutocompleteOnly&&j[h],c=(h===e.backspace||h===e["delete"])&&m.selected,g=h===e.backspace&&0===f.newTag.text().length&&o.enableEditingLastTag,d=(h===e.backspace||h===e.left||h===e.right)&&0===f.newTag.text().length&&!o.enableEditingLastTag,b)m.addText(f.newTag.text());else if(g){var k;m.selectPrior(),k=m.removeSelected(),k&&f.newTag.text(k[o.displayProperty])}else c?m.removeSelected():d&&(h===e.left||h===e.backspace?m.selectPrior():h===e.right&&m.selectNext());(b||d||c||g)&&a.preventDefault()}}).on("input-paste",function(a){if(o.addOnPaste){var b=a.getTextData(),c=b.split(o.pasteSplitPattern);c.length>1&&(c.forEach(function(a){m.addText(a)}),a.preventDefault())}})}}}]).directive("tiTagItem",["tiUtil",function(a){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(b,c,d,e){var f=e.registerTagItem(),g=f.getOptions();b.$$template=g.template,b.$$removeTagSymbol=g.removeTagSymbol,b.$getDisplayText=function(){return a.safeToString(b.data[g.displayProperty])},b.$removeTag=function(){f.removeTag(b.$index)},b.$watch("$parent.$index",function(a){b.$index=a})}}}]).directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(b,c,d,f,g,h){function i(a,b,c){var d,e,g,i={};return g=function(){return b.tagsInput.keyProperty||b.tagsInput.displayProperty},d=function(a,c){return a.filter(function(a){return!h.findInObjectArray(c,a,g(),function(a,c){return b.tagsInput.replaceSpacesWithDashes&&(a=h.replaceSpacesWithDashes(a),c=h.replaceSpacesWithDashes(c)),h.defaultComparer(a,c)})})},i.reset=function(){e=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null},i.show=function(){b.selectFirstMatch?i.select(0):i.selected=null,i.visible=!0},i.load=h.debounce(function(c,j){i.query=c;var k=f.when(a({$query:c}));e=k,k.then(function(a){k===e&&(a=h.makeObjectArray(a.data||a,g()),a=d(a,j),i.items=a.slice(0,b.maxResultsToShow),i.items.length>0?i.show():i.reset())})},b.debounceDelay),i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a],c.trigger("suggestion-selected",a)},i.reset(),i}function j(a,b){var c=a.find("li").eq(b),d=c.parent(),e=c.prop("offsetTop"),f=c.prop("offsetHeight"),g=d.prop("clientHeight"),h=d.prop("scrollTop");h>e?d.prop("scrollTop",e):e+f>g+h&&d.prop("scrollTop",e+f-g)}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(a,b,c){a.events=h.simplePubSub(),g.load("autoComplete",a,c,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),a.suggestionList=new i(a.source,a.options,a.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return a.options},getQuery:function(){return a.suggestionList.query}}}}],link:function(b,c,d,f){var g,i=[e.enter,e.tab,e.escape,e.up,e.down],k=b.suggestionList,l=f.registerAutocomplete(),m=b.options,n=b.events;m.tagsInput=l.getOptions(),g=function(a){return a&&a.length>=m.minLength||!a&&m.loadOnEmpty},b.addSuggestionByIndex=function(a){k.select(a),b.addSuggestion()},b.addSuggestion=function(){var b=!1;return k.selected&&(l.addTag(a.copy(k.selected)),k.reset(),l.focusInput(),b=!0),b},b.track=function(a){return a[m.tagsInput.keyProperty||m.tagsInput.displayProperty]},l.on("tag-added tag-removed invalid-tag input-blur",function(){k.reset()}).on("input-change",function(a){g(a)?k.load(a,l.getTags()):k.reset()}).on("input-focus",function(){var a=l.getCurrentTagText();m.loadOnFocus&&g(a)&&k.load(a,l.getTags())}).on("input-keydown",function(a){var c=a.keyCode,d=!1;if(!h.isModifierOn(a)&&-1!==i.indexOf(c))return k.visible?c===e.down?(k.selectNext(),d=!0):c===e.up?(k.selectPrior(),d=!0):c===e.escape?(k.reset(),d=!0):(c===e.enter||c===e.tab)&&(d=b.addSuggestion()):c===e.down&&b.options.loadOnDownArrow&&(k.load(l.getCurrentTagText(),l.getTags()),d=!0),d?(a.preventDefault(),a.stopImmediatePropagation(),!1):void 0}),n.on("suggestion-selected",function(a){j(c,a)})}}}]).directive("tiAutocompleteMatch",["$sce","tiUtil",function(a,b){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(c,d,e,f){var g=f.registerAutocompleteMatch(),h=g.getOptions();c.$$template=h.template,c.$index=c.$parent.$index,c.$highlight=function(c){return h.highlightMatchedText&&(c=b.safeHighlight(c,g.getQuery())),a.trustAsHtml(c)},c.$getDisplayText=function(){return b.safeToString(c.data[h.displayProperty||h.tagsInput.displayProperty])}}}}]).directive("tiTranscludeAppend",function(){return function(a,b,c,d,e){e(function(a){b.append(a)})}}).directive("tiAutosize",["tagsInputConfig",function(b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){var g,h,i=b.getTextAutosizeThreshold();g=a.element('<span class="cui-tags__registered-tag"></span>'),g.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),d.parent().append(g),h=function(b){var c,f=b;return a.isString(f)&&0===f.length&&(f=e.placeholder),f&&(g.text(f),g.css("display",""),c=g.prop("offsetWidth"),g.css("display","none")),d.css("width",c?c+i+"px":""),b},f.$parsers.unshift(h),f.$formatters.unshift(h),e.$observe("placeholder",function(a){f.$modelValue||h(a)})}}}]).directive("tiBindAttrs",function(){return function(b,c,d){b.$watch(d.tiBindAttrs,function(b){a.forEach(b,function(a,b){d.$set(b,a)})},!0)}}).provider("tagsInputConfig",function(){var b={},c={},d=3;this.setDefaults=function(a,c){return b[a]=c,this},this.setActiveInterpolation=function(a,b){return c[a]=b,this},this.setTextAutosizeThreshold=function(a){return d=a,this},this.$get=["$interpolate",function(e){var f={};return f[String]=function(a){return a},f[Number]=function(a){return parseInt(a,10)},f[Boolean]=function(a){return"true"===a.toLowerCase()},f[RegExp]=function(a){return new RegExp(a)},{load:function(d,g,h,i){var j=function(){return!0};g.options={},a.forEach(i,function(i,k){var l,m,n,o,p,q;l=i[0],m=i[1],n=i[2]||j,o=f[l],p=function(){var c=b[d]&&b[d][k];return a.isDefined(c)?c:m},q=function(a){g.options[k]=a&&n(a)?o(a):p()},c[d]&&c[d][k]?h.$observe(k,function(a){q(a),g.events.trigger("option-change",{name:k,newValue:a})}):q(h[k]&&e(h[k])(g.$parent))})},getTextAutosizeThreshold:function(){return d}}}]}).factory("tiUtil",["$timeout",function(b){var c={};return c.debounce=function(a,c){var d;return function(){var e=arguments;b.cancel(d),d=b(function(){a.apply(null,e)},c)}},c.makeObjectArray=function(b,c){if(!a.isArray(b)||0===b.length||a.isObject(b[0]))return b;var d=[];return b.forEach(function(a){var b={};b[c]=a,d.push(b)}),d},c.findInObjectArray=function(a,b,d,e){var f=null;return e=e||c.defaultComparer,a.some(function(a){return e(a[d],b[d])?(f=a,!0):void 0}),f},c.defaultComparer=function(a,b){return c.safeToString(a).toLowerCase()===c.safeToString(b).toLowerCase()},c.safeHighlight=function(a,b){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!b)return a;a=c.encodeHTML(a),b=c.encodeHTML(b);var e=new RegExp("&[^;]+;|"+d(b),"gi");return a.replace(e,function(a){return a.toLowerCase()===b.toLowerCase()?"<em>"+a+"</em>":a})},c.safeToString=function(b){return a.isUndefined(b)||null===b?"":b.toString().trim()},c.encodeHTML=function(a){return c.safeToString(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},c.handleUndefinedResult=function(b,c){return function(){var d=b.apply(null,arguments);return a.isUndefined(d)?c:d}},c.replaceSpacesWithDashes=function(a){return c.safeToString(a).replace(/\s/g,"-")},c.isModifierOn=function(a){return a.shiftKey||a.ctrlKey||a.altKey||a.metaKey},c.simplePubSub=function(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(b,d){var e=a[b]||[];return e.every(function(a){return c.handleUndefinedResult(a,!0)(d)}),this}}},c}]).run(["$templateCache",function(a){a.put("ngTagsInput/tags-input.html",'<div class="cui-tags__host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="cui-tags__container" ng-class="{\'cui-tags__container--focused\': hasFocus}"><ul class="cui-tags__tag-list"><li class="cui-tags__tag" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{\'cui-tags__tag--selected\': tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="cui-tags__input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'cui-tags__input--invalid\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),a.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="cui-tags__remove" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),a.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),a.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}]),a.module("cui-ng").directive("tether",["$timeout","$parse",function(a,b){return{restrict:"A",scope:!0,link:function(b,c,d){var e=void 0;c[0].classList.add("hide--opacity"),a(function(){e=new Tether({element:c,target:d.target,attachment:d.attachment||"top center",targetAttachment:d.targetAttachment||"bottom center",offset:d.offset||"0 0",targetOffset:d.targetOffset||"0 0",targetModifier:d.targetModifier||void 0,constraints:b.$eval(d.constraints)||void 0})}).then(function(){e.position(),c[0].classList.remove("hide--opacity")})}}}]),a.module("cui-ng").directive("uiSrefActiveFor",["$state","PubSub",function(a,b){return{restrict:"A",compile:function(){return{pre:function(c,d,e){var f=void 0,g=e.uiSrefActiveForClasses?e.uiSrefActiveForClasses.split(",").map(function(a){return a.trim()}):["active"],h=function(a,b){var c=b.toState;c.name.indexOf(e.uiSrefActiveFor)>=0&&!f?(g.forEach(function(a){return d[0].classList.add(a)}),f=!0):c.name.indexOf(e.uiSrefActiveFor)<0&&f&&(g.forEach(function(a){return d[0].classList.remove(a)}),f=!1)},i=b.subscribe("stateChange",h);h(null,{toState:a.current}),c.$on("$destroy",function(){b.unsubscribe(i)})}}}}}]),a.module("cui-ng").directive("uiSrefActiveNested",["$state","PubSub",function(a,b){return{restrict:"A",compile:function(){return{pre:function(c,d,e){var f=void 0;if(!e.uiSref)throw"ui-sref-active-nested can only be used on elements with a ui-sref attribute";f=e.uiSref.indexOf(".")>-1?e.uiSref.split(".")[0]:e.uiSref;var g=function(a,b){var c=b.toState;c.name.indexOf(".")>-1&&c.name.split(".")[0]===f?d[0].classList.add(e.uiSrefActiveNested):-1===c.name.indexOf(".")&&c.name===f?d[0].classList.add(e.uiSrefActiveNested):d[0].classList.remove(e.uiSrefActiveNested)},h=b.subscribe("stateChange",g);g(null,{toState:a.current}),c.$on("$destroy",function(){b.unsubscribe(h)})}}}}}]);var h=function(a,b,c,d,e,f,g){a.go(c,e,{notify:!1}).then(function(){b.$broadcast("$stateChangeSuccess",{toState:d,toParams:e,fromState:f,fromParams:g})})};a.module("cui.authorization",[]).factory("cui.authorization.routing",["cui.authorization.authorize","$timeout","$rootScope","$state",function(a,b,c,d){var e=function(b,e,f,g,i){var j=arguments.length<=5||void 0===arguments[5]?"loginRequired":arguments[5],k=arguments.length<=6||void 0===arguments[6]?"notAuthorized":arguments[6],l=void 0;if(void 0!==b.access){l=a.authorize(b.access.loginRequired,b.access.requiredEntitlements,b.access.entitlementType,i);var m=void 0;switch(l){case"login required":m=j;case"not authorized":m=k;default:break;case"authorized":m=b.name}h(d,c,m,b,e,f,g)}else h(d,c,b.name,b,e,f,g)};return e}]).factory("cui.authorization.authorize",[function(){var b=function(b,c){var d=arguments.length<=2||void 0===arguments[2]?"atLeastOne":arguments[2],e=arguments[3],f=[],g=!0,h="not authorized";if(b===!0&&void 0===e)h="login required";else if(b!==!0||void 0===e||void 0!==c&&0!==c.length){if(c){a.forEach(e,function(a){f.push(a.toLowerCase())});for(var i=0;i<c.length;i++){var j=c[i].toLowerCase();if("all"===d){if(g=g&&f.indexOf(j)>-1,g===!1)break}else if("atLeastOne"===d&&(g=f.indexOf(j)>-1))break}h=g?"authorized":"not authorized"}}else h="authorized";return h};return{authorize:b}}]).directive("cuiAccess",["cui.authorization.authorize",function(a){return{restrict:"A",scope:{userEntitlements:"=",cuiAccess:"="},link:function(b,c,d){var e=b.cuiAccess&&b.cuiAccess.requiredEntitlements||[],f=b.cuiAccess&&b.cuiAccess.entitlementType||"atLeastOne",g=d.notAuthorizedClasses&&d.notAuthorizedClasses.split(",").map(function(a){return a.trim()}),h=c.css("display"),i=function(){g?g.forEach(function(a){return c[0].classList.remove(a)}):c.css("display",h)},j=function(){g?g.forEach(function(a){return c[0].classList.add(a)}):c.css("display","none")};b.$watch("userEntitlements",function(){var c=a.authorize(!0,e,f,b.userEntitlements);"authorized"!==c?j():i()})}}}])}(angular);
//# sourceMappingURL=cui-ng.min.js.map